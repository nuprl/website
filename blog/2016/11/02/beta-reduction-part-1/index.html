<!DOCTYPE html>
<html lang="en">
  <head>

    <meta charset="utf-8">
    <title>Beta Reduction (Part 1)</title>
    <meta name="description" content="The λ-calculus is often introduced by showing how to build a real programming language from it's simple syntactic forms. In this series of post, I attempt to introduce it as a tool for modeling semantics. So if you're opening Barendregt for the first time...">
    <meta name="author"      content="PRL">
    <meta name="keywords"    content="lambda, calculus, beta, reduction, semantics, by Milo Davis">
    <meta name="viewport"    content="width=device-width, initial-scale=1.0">
    <link rel="icon"      href="/img/favicon.ico">
    <link rel="canonical" href="http://prl.ccs.neu.edu/blog/2016/11/02/beta-reduction-part-1/">
    <link rel="next" href="/blog/2016/10/31/meaningful-distinctions/">
    <link rel="prev" href="/blog/2016/11/16/understanding-constructive-galois-connections/">
    <script type="text/javascript" async
            src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
    </script>
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="/css/bootstrap.min.css">
    <link rel="stylesheet" type="text/css" href="/css/pygments.css">
    <link rel="stylesheet" type="text/css" href="/css/custom.css">
    <link rel="stylesheet" type="text/css" href="/css/racket.css">
    <link rel="stylesheet" type="text/css" href="/css/scribble.css">
    <!-- Feeds -->
    <link rel="alternate" type="application/atom+xml"
          href="/blog/feeds/all.atom.xml" title="Atom Feed">
    <link rel="alternate" type="application/rss+xml"
          href="/blog/feeds/all.rss.xml" title="RSS Feed">
  </head>
  <body id="pn-top" class="subpages">
    <nav class="navbar navbar-inverse">
      <div class="container">
        <div class="row">
          <div class="navbar-header">
            <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
              <span class="sr-only">Toggle navigation</span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
              <span class="icon-bar"></span>
            </button>
          </div>
          <div id="navbar" class="navbar-collapse collapse">
            <ul class="nav navbar-nav">
              <li role="presentation"><a href="/">Home</a></li>
              <li role="presentation"><a href="/people.html">People</a></li>
              <li role="presentation"><a href="/teaching.html">Teaching</a></li>
              <li role="presentation"><a href="/seminars.html">Seminars</a></li>
              <li role="presentation"><a href="/software.html">Software</a></li>
              <li role="presentation"><a href="/publications.html">Publications</a></li>
              <li role="presentation"><a href="/new-members.html">New Members</a></li>
              <li role="presentation"><a href="/contact.html">Contact</a></li>
              <li role="presentation" class="active"><a href="/blog/index.html">Blog</a></li>
            </ul>
          </div><!--/.navbar-collapse -->
        </div>
      </div>
    </nav>
    <div class="jumbotron subpages">
      <div class="container">
        <div class="row">
          <a style="text-decoration:none; color:white" href="/blog/index.html">
            <div class="col-md-12">
              <h1>Inside PRL</h1>
              <p>Reading between the parentheses</p>
            </div>
          </a>
        </div>
      </div>
    </div>
    <div class="pn-main-wrapper">
      <div class="content">
        <div class="container">
          <div class="row">

            <!-- Main column -->
            <div id="content" class="col-md-12">



              <article>
  <header>
    <h1>Beta Reduction (Part 1)</h1>
    <p class='date-and-tags'>
<time datetime="2016-11-02" pubdate="true">2016-11-02</time> :: <span class="tags"><a href="/blog/tags/lambda.html">lambda</a>, <a href="/blog/tags/calculus.html">calculus</a>, <a href="/blog/tags/beta.html">beta</a>, <a href="/blog/tags/reduction.html">reduction</a>, <a href="/blog/tags/semantics.html">semantics</a>, <a href="/blog/tags/by-Milo-Davis.html">by Milo Davis</a></span></p>
  </header>

<p>The λ-calculus is often introduced by showing how to build a real programming language from it&rsquo;s simple syntactic forms. In this series of post, I attempt to introduce it as a tool for modeling semantics. So if you&rsquo;re opening <a href="https://www.amazon.com/Calculus-Semantics-Studies-Foundations-Mathematics/dp/0444875085">Barendregt</a> for the first time, trying to understand a lecture from a programming languages or functional programming class, or just starting to become involved in PL research, I hope this post will help you understand evaluation by substitution (β-reduction).</p>
<!-- more-->

<h1 id="introduction">Introduction</h1>

<p>This post is aimed at myself around 18 months ago. At the time, I had spent a fair amount of time programming, taken a functional programming class, and been introduced to the λ-calculus. Despite that, I didn&rsquo;t really understand how the λ-calculus was really used in PL research and how it really worked. When I was asked to prove a novel theorem about β-reduction, I really struggled. I spent a lot of time looking online for an explanation of the proofs I could understand. This series of posts is my attempt to rectify that.</p>

<p>This first post briefly introduces the λ-calculus and explains β-reduction through a formally defined semantics and examples in <a href="https://racket-lang.org/">Racket</a>, <a href="http://ocaml.org/">OCaml</a>, and <a href="https://www.haskell.org/">Haskell</a>. My goal in this post is to develop an intuition about what β-reduction is and how it works. In a followup post, I&rsquo;ll explain how to prove that β-reduction is confluent.</p>

<h1 id="the-λ-calculus">The λ-Calculus</h1>

<p>The λ-calculus is a simple model of computation developed by <a href="https://en.wikipedia.org/wiki/Alonzo_Church">Alonzo Church</a>. The λ-calculus has three different syntactic forms: variables, anonymous functions (lambdas), and function application. The <a href="http://matt.might.net/articles/grammars-bnf-ebnf/">BNF</a> for the λ-calculus is as follows:</p>

<pre><code>e ::= x
   | λx.e
   | e e</code></pre>

<p>In the above BNF, <code>x</code> is a metavariable, standing for any variable. In this post, I use <code>x</code>, <code>y</code>, <code>z</code>, <code>a</code>, and <code>b</code> as variables in my examples. The <code>λx.e</code> term represents a function with a single parameter <code>x</code>. We say that the parameter, <code>x</code> is bound in <code>e</code>. It is possible to have unbound variables in the λ-calculus, though for the most part, we can ignore them in our discussion of this topic. Finally, applications consist of two expressions. The first expression is the function and the second is its argument. Parenthesis are often added for clarity.</p>

<p>If you program regularly in a functional language, this might look fairly familiar to you. In fact, you can compute anything in the λ-calculus that you can in any other language. In other words, the λ-calculus is Turing complete. Of course, you wouldn&rsquo;t want to program in this language as it&rsquo;s significantly harder to encode some of these constructs than just using built in language constructs like numbers. I&rsquo;m not going to discuss these ideas in detail, but if you&rsquo;re interested in how to add numbers, booleans, conditionals, and recursion to the λ-calculus, Matt Might has a few great posts about how to do this using equivalent constructs in <a href="http://matt.might.net/articles/python-church-y-combinator/">Python</a>, <a href="http://matt.might.net/articles/church-encodings-demo-in-scheme/">Scheme</a>, and <a href="http://matt.might.net/articles/js-church/">JavaScript</a>.</p>

<p>Now that we&rsquo;ve discussed the syntax of the language, we can look at the semantics, or how terms evaluate. Below I have the evaluation rules for the λ-calculus. The arrow represents β-reduction which is the subject of this post. The semantics rely on substitution which is depicted with brackets. I have also defined the substitution function. I&rsquo;m assuming the Barendregt <a href="http://www.cse.chalmers.se/research/group/logic/TypesSS05/Extra/geuvers.pdf">variable convention (2.6)</a> which states that every bound variable is distinct from every free variable.</p>

<pre><code>x[ x := e ] = e
y[ x := e ] = y
(λx.e1)[ x := e2 ] = (λx.e1[ x := e2 ])
(e1 e2)[ x := e3 ] = (e1[ x := e3 ] e2[ x := e3 ])</code></pre>

<p>With the substitution function defined, we can write a semantics for evaluation:</p>

<pre><code>------------------------------
  (λx.e1) e2 -&gt;β e1[ x := e2 ]

    e1 -&gt;β e1'
--------------------
  e1 e2 -&gt;β e1' e2

    e2 -&gt;β e2'
--------------------
  e1 e2 -&gt;β e1 e2'</code></pre>

<p>These rules mean that if you have a term in which you have a function applied to an argument, you substitute the argument into the function. The next two rules say that if you can apply an evaluation rule to either the first or second subterm, you may do so. Notice that both the second and third rules might apply to a single term. These rules are nondeterministic and in these cases it is fine to use whichever rule you want (see below).</p>

<h1 id="what-is-β-reduction">What is β-reduction?</h1>

<p>More generally, what is reduction? Reduction is a model for computation that consists of a set of rules that determine how a term is stepped forwards. β-reduction is reduction by function application. When you β-reduce, you remove the λ from the function and substitute the argument for the function&rsquo;s parameter in its body. More formally, we can define β-reduction as follows:</p>

<pre><code>(λx.e1) e2 = e1[ x := e2 ]</code></pre>

<p>Given that definition, lets look at a few examples. I&rsquo;ve written the examples in the λ-calculus, Racket, OCaml, and Haskell. It&rsquo;s important to note that these languages have more restricted semantics than the original λ-calculus. These restrictions are called reduction strategies. In Racket and OCaml, it is not possible to substitute with anything except for a value, meaning you need to evaluate the argument until it is a function before substituting. This makes the evaluation reduce left to right before substituting. This restriction is called &ldquo;call by value&rdquo;. In Haskell, no reduction occurs in arguments, meaning that we would omit the third rule. This could potentially require an expression to be evaluated multiple times. In reality, Haskell caches the results of these evaluations so each expression is only evaluated once, but I&rsquo;m going to ignore that here. This presentation of Haskell&rsquo;s semantics is called &ldquo;call by name&rdquo; and the optimization is called &ldquo;call by need&rdquo;. (For more details on lazy evaluation, I recommend: <a href="http://www.ccs.neu.edu/racket/pubs/esop12-cf.pdf">Chang and Felleisen, ESOP 2012</a>.)</p>

<h1 id="some-examples">Some Examples</h1>

<p>The first example evaluates the same way in all of the languages.</p>

<pre><code>    (λx.x) (λy.y)
-&gt;β x[ x := (λy.y) ]
=   (λy.y)</code></pre>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">))</span>
<span class="n">-&gt;β</span> <span class="n">x</span><span class="p">[</span> <span class="n">x</span> <span class="n">:=</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)</span> <span class="p">]</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" style="color: inherit">=</a></span>   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<div class="brush: ocaml">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="n">x</span><span class="o">[</span><span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">]</span>
<span class="o">=</span>   <span class="n">x</span><span class="o">[</span><span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">]</span>
</pre></div>
</td></tr></tbody></table>
</div>

<div class="brush: haskell">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="n">x</span><span class="p">[</span> <span class="n">x</span> <span class="kt">:=</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="p">]</span>
<span class="ow">=</span>   <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>In our next example, we will see the differences between the languages. They all reduce to the same thing, albeit in different ways.</p>

<div class="brush: haskell">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="p">((</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">a</span><span class="p">))</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)[</span><span class="n">x</span> <span class="kt">:=</span> <span class="p">((</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="n">a</span><span class="p">))]</span>
<span class="ow">=</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Note that the application on the right hand side is never evaluated. In an eager language like Racket or OCaml, the term being substituted must be a value, so the evaluation follows a different path.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">))</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">a</span><span class="p">)))</span>
<span class="n">-&gt;β</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">))</span> <span class="p">(</span><span class="n">z</span><span class="p">[</span> <span class="n">z</span> <span class="n">:=</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">a</span><span class="p">)</span> <span class="p">]))</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" style="color: inherit">=</a></span>   <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">))</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">a</span><span class="p">))</span>
<span class="n">-&gt;β</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)[</span> <span class="n">x</span> <span class="n">:=</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="n">a</span><span class="p">)</span> <span class="p">]</span>
<span class="nb"><a href="http://docs.racket-lang.org/reference/generic-numbers.html#(def._((quote._~23~25kernel)._~3d))" style="color: inherit">=</a></span>   <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<div class="brush: ocaml">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">))</span> <span class="o">((</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">))</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="n">z</span><span class="o">[</span> <span class="n">z</span> <span class="o">:=</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">])</span>
<span class="o">=</span>   <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">))</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)[</span> <span class="n">x</span> <span class="o">:=</span> <span class="o">(</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="n">a</span><span class="o">)</span> <span class="o">]</span>
<span class="o">=</span>   <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The nondeterministic semantics of the λ-calculus lead to two possible paths through the above computation:</p>

<pre><code>    (λx.λy.y) ((λz.z) (λa.a))
-&gt;β (λx.λy.y) (z[ z := (λa.a) ])
=   (λx.λy.y) (λa.a)
-&gt;β (λy.y)[ x := (λa.a) ]
=   (λy.y)</code></pre>

<pre><code>    (λx.λy.y) ((λz.z) (λa.a))
-&gt;β (λy.y)[ x := ((λz.z) (λa.a)) ]
=   (λy.y)</code></pre>

<p>Lets look at a final example. This one is more complicated than the previous ones. I&rsquo;m also going to stop showing the substitution explicitly. In the literature, it is fairly common not to see it explicitly, but you should still be able to follow what&rsquo;s going on.</p>

<div class="brush: racket">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span> <span class="p">(((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">a</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="n">a</span> <span class="n">b</span><span class="p">)))</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">))</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">)))</span>
<span class="n">-&gt;β</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)</span> <span class="n">b</span><span class="p">))</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">)))</span>
<span class="n">-&gt;β</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="n">y</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">)))</span>
<span class="n">-&gt;β</span> <span class="p">((</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="n">x</span><span class="p">)</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">))</span>
<span class="n">-&gt;β</span> <span class="p">(</span><span class="k"><a href="http://docs.racket-lang.org/reference/lambda.html#(form._((lib._racket/private/base..rkt)._~ce~bb))" style="color: inherit">λ</a></span> <span class="p">(</span><span class="n">z</span><span class="p">)</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>The same thing happens in OCaml</p>

<div class="brush: ocaml">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">((</span><span class="k">fun</span> <span class="n">a</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="n">a</span> <span class="n">b</span><span class="o">))</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">));;</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">((</span><span class="k">fun</span> <span class="n">b</span> <span class="o">-&gt;</span> <span class="o">(</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="n">b</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">));;</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">((</span><span class="k">fun</span> <span class="n">y</span> <span class="o">-&gt;</span> <span class="n">y</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">))</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">x</span><span class="o">)</span> <span class="o">(</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">)</span>
<span class="o">-&gt;</span><span class="n">β</span> <span class="o">(</span><span class="k">fun</span> <span class="n">z</span> <span class="o">-&gt;</span> <span class="n">z</span><span class="o">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>In Haskell, the situation is a little different:</p>

<div class="brush: haskell">
 <table class="sourcetable">
  <tbody>
   <tr>
    <td class="linenos">
     <div class="linenodiv">
      <pre>1
2
3
4
5</pre></div></td>
    <td class="code">
     <div class="source">
      <pre><span></span>    <span class="p">(</span><span class="nf">\</span><span class="n">x</span> <span class="ow">-&gt;</span> <span class="n">x</span><span class="p">)</span> <span class="p">((</span><span class="nf">\</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="nf">\</span><span class="n">b</span> <span class="ow">-&gt;</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">))</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="p">(</span><span class="nf">\</span><span class="n">a</span> <span class="ow">-&gt;</span> <span class="nf">\</span><span class="n">b</span> <span class="ow">-&gt;</span> <span class="n">a</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="p">(</span><span class="nf">\</span><span class="n">b</span> <span class="ow">-&gt;</span>  <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="n">b</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="p">(</span><span class="nf">\</span><span class="n">y</span> <span class="ow">-&gt;</span> <span class="n">y</span><span class="p">)</span> <span class="p">(</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span>
<span class="ow">-&gt;</span><span class="n">β</span> <span class="p">(</span><span class="nf">\</span><span class="n">z</span> <span class="ow">-&gt;</span> <span class="n">z</span><span class="p">)</span>
</pre></div>
</td></tr></tbody></table>
</div>

<p>Finally, in the λ-calculus, things can go a few different ways.</p>

<pre><code>    (λx.x) ((λa.λb.a b) (λy.y) (λz.z))
-&gt;β (λx.x) ((λb.(λy.y) b) (λz.z))
-&gt;β (λx.x) ((λy.y) (λz.z))
-&gt;β (λy.y) (λz.z)
-&gt;β (λz.z)</code></pre>

<pre><code>    (λx.x) ((λa.λb.a b) (λy.y) (λz.z))
-&gt;β (λa.λb.a b) (λy.y) (λz.z)
-&gt;β (λb.(λy.y) b) (λz.z)
-&gt;β (λy.y) (λz.z)
-&gt;β (λz.z)</code></pre>

<pre><code>    (λx.x) ((λa.λb.a b) (λy.y) (λz.z))
-&gt;β (λx.x) ((λb.(λy.y) b) (λz.z))
-&gt;β (λb.(λy.y) b) (λz.z)
-&gt;β (λy.y) (λz.z)
-&gt;β (λz.z)</code></pre>

<p>There&rsquo;s a very interesting property of all of those examples: they all evaluate to the same thing, regardless of the reduction order taken. This is because β-reduction of the λ-calculus has the weak Church-Rosser Property. In systems that have this property, if a reduction sequence terminates, it will always evaluate to the same term, regardless of the path taken. This property does not necessarily hold if the term does not terminate. See if you can work out what happens to this term with each reduction strategy:</p>

<pre><code>(λx.λy.y) ((λa.a a) (λb.b b))</code></pre>

<p>A weaker property is called confluence, which states that all reduction sequences can be stepped to a common term. At the beginning of this post, I said that the λ-calculus is used as a model for real programming languages. This is generally true. There are proofs that the λ-calculus has this property, but people don&rsquo;t tend to prove such things about their actual languages, it is usually enough to build them knowing that their theoretical model has the property. In a follow up post, I&rsquo;ll explain the proofs that the λ-calculus does indeed have these properties.</p>

<p>P.S. In Racket, you can look at the examples using the <a href="http://docs.racket-lang.org/stepper/">stepper</a> which will allow you to interactively run the term and see how it reduces.</p>
  <br/><br/>
  <p>
  <div id="disqus_thread">
    <a href="#" onclick="loadDisqus(); return false;">
      <b>(Show comments / Powered by Disqus)</b>
    </a>
  </div>
  </p>
  <script>
    function loadDisqus() {
      var dsq = document.createElement('script');
      dsq.type = 'text/javascript';
      dsq.async = true;
      dsq.src = 'https://neuprl.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] ||
        document.getElementsByTagName('body')[0]).appendChild(dsq);
    };
  </script>
  <br/>
  <footer>
    <script type="text/javascript">
      !function(d,s,id){
          var js,fjs=d.getElementsByTagName(s)[0];
          if(!d.getElementById(id)){
              js=d.createElement(s);
              js.id=id;
              js.src="//platform.twitter.com/widgets.js";
              fjs.parentNode.insertBefore(js,fjs);
          }
      }(document,"script","twitter-wjs");
    </script>
    <a href="https://twitter.com/share"
       class="twitter-share-button"
       data-url="http://prl.ccs.neu.edu/blog/2016/11/02/beta-reduction-part-1/"
       data-dnt="true">
      "Tweet"</a>
    <ul class="pager">
    <li class="previous">
      <a href="/blog/2016/11/16/understanding-constructive-galois-connections/">&larr; <em>Understanding Constructive Galois Connections</em></a>
    </li>
    <li class="next">
      <a href="/blog/2016/10/31/meaningful-distinctions/"><em>Meaningful Distinctions</em> &rarr;</a>
    </li>
    </ul>
  </footer>
</article>
            </div>
          </div>
        </div>
        <footer class="footer">
          <hr />
          <p><a href="https://twitter.com/neu_prl"
                class="twitter-follow-button"
                data-show-count="false"
                data-lang="en">
               "Follow the PRL"
             </a>
             <script type="text/javascript">
               !function(d,s,id){
                   var js,fjs=d.getElementsByTagName(s)[0];
                   if(!d.getElementById(id)){
                       js=d.createElement(s);
                       js.id=id;
                       js.src="//platform.twitter.com/widgets.js";
                       fjs.parentNode.insertBefore(js,fjs);
                   }
               }(document,"script","twitter-wjs");
             </script></p>
          <p>Blog generated
          by <a href="https://github.com/greghendershott/frog">Frog</a>,
          using <a href="http://twitter.github.com/bootstrap/index.html">Bootstrap</a>.</p>
          <p>© Copyright Programming Research Laboratory 2015-2016 | made by Catchexception s.r.o. | source on <a href="https://github.com/nuprl/website">GitHub</a></p>
        </footer>
      </div>
    </div>
    <!-- </body> JS -->
    <script type="text/javascript" src="//code.jquery.com/jquery.min.js"></script>
    <script type="text/javascript" src="/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="/js/custom.js"></script>
    <script type="text/javascript" src="/js/analytics.js"></script>
  </body>
</html>